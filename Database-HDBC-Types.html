<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Database.HDBC.Types</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Database-HDBC-Types.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">HDBC-3.0.0: Haskell Database Connectivity</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Portability</th><td>portable</td></tr><tr><th>Stability</th><td>provisional</td></tr><tr><th>Maintainer</th><td>John Goerzen &lt;jgoerzen@complete.org&gt;</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Database.HDBC.Types</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Typeclasses
</a></li><li><a href="#g:2">Data types
</a></li><li><a href="#g:3">functions
</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Types for HDBC.
</p><p>Written by John Goerzen, jgoerzen@complete.org
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">class</span> (<a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Typeable-Internal.html#t:Typeable">Typeable</a> conn, <a href="Database-HDBC-Types.html#t:Statement">Statement</a> (<a href="Database-HDBC-Types.html#t:ConnStatement">ConnStatement</a> conn)) =&gt; <a href="#t:Connection">Connection</a> conn  <span class="keyword">where</span><ul class="subs"><li><span class="keyword">type</span> <a href="#t:ConnStatement">ConnStatement</a> conn :: *</li><li><a href="#v:disconnect">disconnect</a> :: conn -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></li><li><a href="#v:begin">begin</a> :: conn -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></li><li><a href="#v:commit">commit</a> :: conn -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></li><li><a href="#v:rollback">rollback</a> :: conn -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></li><li><a href="#v:inTransaction">inTransaction</a> :: conn -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:connStatus">connStatus</a> :: conn -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="Database-HDBC-Types.html#t:ConnStatus">ConnStatus</a></li><li><a href="#v:prepare">prepare</a> :: conn -&gt; <a href="Database-HDBC-Types.html#t:Query">Query</a> -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> (<a href="Database-HDBC-Types.html#t:ConnStatement">ConnStatement</a> conn)</li><li><a href="#v:run">run</a> :: conn -&gt; <a href="Database-HDBC-Types.html#t:Query">Query</a> -&gt; [<a href="Database-HDBC-SqlValue.html#t:SqlValue">SqlValue</a>] -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></li><li><a href="#v:runRaw">runRaw</a> :: conn -&gt; <a href="Database-HDBC-Types.html#t:Query">Query</a> -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></li><li><a href="#v:runMany">runMany</a> :: conn -&gt; <a href="Database-HDBC-Types.html#t:Query">Query</a> -&gt; [[<a href="Database-HDBC-SqlValue.html#t:SqlValue">SqlValue</a>]] -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></li><li><a href="#v:clone">clone</a> :: conn -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> conn</li><li><a href="#v:hdbcDriverName">hdbcDriverName</a> :: conn -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></li><li><a href="#v:dbTransactionSupport">dbTransactionSupport</a> :: conn -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Bool.html#t:Bool">Bool</a></li></ul></li><li class="src short"><span class="keyword">class</span> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Typeable-Internal.html#t:Typeable">Typeable</a> stmt =&gt; <a href="#t:Statement">Statement</a> stmt  <span class="keyword">where</span><ul class="subs"><li><a href="#v:execute">execute</a> :: stmt -&gt; [<a href="Database-HDBC-SqlValue.html#t:SqlValue">SqlValue</a>] -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></li><li><a href="#v:executeRaw">executeRaw</a> :: stmt -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></li><li><a href="#v:executeMany">executeMany</a> :: stmt -&gt; [[<a href="Database-HDBC-SqlValue.html#t:SqlValue">SqlValue</a>]] -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></li><li><a href="#v:statementStatus">statementStatus</a> :: stmt -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="Database-HDBC-Types.html#t:StatementStatus">StatementStatus</a></li><li><a href="#v:affectedRows">affectedRows</a> :: stmt -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Prelude.html#t:Integer">Integer</a></li><li><a href="#v:finish">finish</a> :: stmt -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></li><li><a href="#v:reset">reset</a> :: stmt -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></li><li><a href="#v:fetchRow">fetchRow</a> :: stmt -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> (<a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> [<a href="Database-HDBC-SqlValue.html#t:SqlValue">SqlValue</a>])</li><li><a href="#v:fetchAllRows">fetchAllRows</a> :: stmt -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> [[<a href="Database-HDBC-SqlValue.html#t:SqlValue">SqlValue</a>]]</li><li><a href="#v:getColumnNames">getColumnNames</a> :: stmt -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> [Text]</li><li><a href="#v:getColumnsCount">getColumnsCount</a> :: stmt -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Int.html#t:Int">Int</a></li><li><a href="#v:originalQuery">originalQuery</a> :: stmt -&gt; <a href="Database-HDBC-Types.html#t:Query">Query</a></li></ul></li><li class="src short"><span class="keyword">newtype</span>  <a href="#t:Query">Query</a>  = <a href="#v:Query">Query</a> {<ul class="subs"><li><a href="#v:unQuery">unQuery</a> :: Text</li></ul>}</li><li class="src short"><span class="keyword">data</span>  <a href="#t:ConnStatus">ConnStatus</a> <ul class="subs"><li>= <a href="#v:ConnOK">ConnOK</a>  </li><li>| <a href="#v:ConnDisconnected">ConnDisconnected</a>  </li><li>| <a href="#v:ConnBad">ConnBad</a>  </li></ul></li><li class="src short"><span class="keyword">data</span>  <a href="#t:ConnWrapper">ConnWrapper</a>  = <span class="keyword">forall</span> conn . <a href="Database-HDBC-Types.html#t:Connection">Connection</a> conn =&gt; <a href="#v:ConnWrapper">ConnWrapper</a> conn</li><li class="src short"><span class="keyword">data</span>  <a href="#t:StatementStatus">StatementStatus</a> <ul class="subs"><li>= <a href="#v:StatementNew">StatementNew</a>  </li><li>| <a href="#v:StatementExecuted">StatementExecuted</a>  </li><li>| <a href="#v:StatementFetched">StatementFetched</a>  </li><li>| <a href="#v:StatementFinished">StatementFinished</a>  </li></ul></li><li class="src short"><span class="keyword">data</span>  <a href="#t:StmtWrapper">StmtWrapper</a>  = <span class="keyword">forall</span> stmt . <a href="Database-HDBC-Types.html#t:Statement">Statement</a> stmt =&gt; <a href="#v:StmtWrapper">StmtWrapper</a> stmt</li><li class="src short"><span class="keyword">data</span>  <a href="#t:SqlError">SqlError</a> <ul class="subs"><li>= <a href="#v:SqlError">SqlError</a> { <ul class="subs"><li><a href="#v:seErrorCode">seErrorCode</a> :: <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></li><li><a href="#v:seErrorMsg">seErrorMsg</a> :: <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></li></ul> }</li><li>| <a href="#v:SqlDriverError">SqlDriverError</a> { <ul class="subs"><li><a href="#v:seErrorMsg">seErrorMsg</a> :: <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></li></ul> }</li></ul></li><li class="src short"><a href="#v:castConnection">castConnection</a> :: <a href="Database-HDBC-Types.html#t:Connection">Connection</a> conn =&gt; <a href="Database-HDBC-Types.html#t:ConnWrapper">ConnWrapper</a> -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> conn</li><li class="src short"><a href="#v:castStatement">castStatement</a> :: <a href="Database-HDBC-Types.html#t:Statement">Statement</a> stmt =&gt; <a href="Database-HDBC-Types.html#t:StmtWrapper">StmtWrapper</a> -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> stmt</li><li class="src short"><a href="#v:withTransaction">withTransaction</a> :: <a href="Database-HDBC-Types.html#t:Connection">Connection</a> conn =&gt; conn -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> a -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:withStatement">withStatement</a> :: (<a href="Database-HDBC-Types.html#t:Connection">Connection</a> conn, <a href="Database-HDBC-Types.html#t:Statement">Statement</a> stmt, stmt ~ <a href="Database-HDBC-Types.html#t:ConnStatement">ConnStatement</a> conn) =&gt; conn -&gt; <a href="Database-HDBC-Types.html#t:Query">Query</a> -&gt; (stmt -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> a) -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> a</li></ul></div><div id="interface"><h1 id="g:1">Typeclasses
</h1><div class="top"><p class="src"><span class="keyword">class</span> (<a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Typeable-Internal.html#t:Typeable">Typeable</a> conn, <a href="Database-HDBC-Types.html#t:Statement">Statement</a> (<a href="Database-HDBC-Types.html#t:ConnStatement">ConnStatement</a> conn)) =&gt; <a name="t:Connection" class="def">Connection</a> conn  <span class="keyword">where</span></p><div class="doc"><p>Typeclass to abstract the working with connection.                  
</p></div><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a name="t:ConnStatement" class="def">ConnStatement</a> conn :: *</p><div class="doc"><p>Specific statement for specific connection
</p></div></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:disconnect" class="def">disconnect</a> :: conn -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></p><div class="doc"><p>Disconnection from the database. Every opened statement must be finished
 after this method executed.
</p></div><p class="src"><a name="v:begin" class="def">begin</a> :: conn -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></p><div class="doc"><p>Explicitly start the transaction. Without starting the transaction you
 can not commit or rollback it. HDBC does not check if transaction started
 or not, this is the application's resposibility.
</p><p>This is not recomended to use <code>start</code> by hands, use <code><a href="Database-HDBC-Types.html#v:withTransaction">withTransaction</a></code>
 instead
</p></div><p class="src"><a name="v:commit" class="def">commit</a> :: conn -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></p><div class="doc"><p>Explicitly commit started transaction. You must <code>start</code> the transaction
 before <code><a href="Database-HDBC-Types.html#v:commit">commit</a></code>
</p><p>This is not recomended to use <code><a href="Database-HDBC-Types.html#v:commit">commit</a></code> by hands, use <code><a href="Database-HDBC-Types.html#v:withTransaction">withTransaction</a></code>
 instead
</p></div><p class="src"><a name="v:rollback" class="def">rollback</a> :: conn -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></p><div class="doc"><p>Rollback the transaction's state. You must <code>start</code> the transaction before
 <code><a href="Database-HDBC-Types.html#v:rollback">rollback</a></code>
</p><p>This is not recomended to use <code><a href="Database-HDBC-Types.html#v:rollback">rollback</a></code> by hands, use <code><a href="Database-HDBC-Types.html#v:withTransaction">withTransaction</a></code>
 instead
</p></div><p class="src"><a name="v:inTransaction" class="def">inTransaction</a> :: conn -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Bool.html#t:Bool">Bool</a></p><div class="doc"><p>Check if current connection is in transaction state. Return True if
 transaction is started. Each driver implements it with it's own way: some
 RDBMS has API to check transaction state (like PostgreSQL), some has no
 (like Sqlite3).
</p></div><p class="src"><a name="v:connStatus" class="def">connStatus</a> :: conn -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="Database-HDBC-Types.html#t:ConnStatus">ConnStatus</a></p><div class="doc"><p>Return the current status of connection
</p></div><p class="src"><a name="v:prepare" class="def">prepare</a> :: conn -&gt; <a href="Database-HDBC-Types.html#t:Query">Query</a> -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> (<a href="Database-HDBC-Types.html#t:ConnStatement">ConnStatement</a> conn)</p><div class="doc"><p>Prepare the statement. Some databases has no feature of preparing
 statements (PostgreSQL can just prepare named statements), so each driver
 behaves it's own way.
</p></div><p class="src"><a name="v:run" class="def">run</a> :: conn -&gt; <a href="Database-HDBC-Types.html#t:Query">Query</a> -&gt; [<a href="Database-HDBC-SqlValue.html#t:SqlValue">SqlValue</a>] -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></p><div class="doc"><p>Run query and safely finalize statement after that. Has default
 implementation through <code><a href="Database-HDBC-Types.html#v:execute">execute</a></code>.
</p></div><p class="src"><a name="v:runRaw" class="def">runRaw</a> :: conn -&gt; <a href="Database-HDBC-Types.html#t:Query">Query</a> -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></p><div class="doc"><p>Run raw query without parameters and safely finalize statement. Has
 default implementation through <code><a href="Database-HDBC-Types.html#v:executeRaw">executeRaw</a></code>.
</p></div><p class="src"><a name="v:runMany" class="def">runMany</a> :: conn -&gt; <a href="Database-HDBC-Types.html#t:Query">Query</a> -&gt; [[<a href="Database-HDBC-SqlValue.html#t:SqlValue">SqlValue</a>]] -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></p><div class="doc"><p>Execute query with set of parameters. Has default implementation through
 <code><a href="Database-HDBC-Types.html#v:executeMany">executeMany</a></code>.
</p></div><p class="src"><a name="v:clone" class="def">clone</a> :: conn -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> conn</p><div class="doc"><p>Clone the database connection. Return new connection with the same
 settings
</p></div><p class="src"><a name="v:hdbcDriverName" class="def">hdbcDriverName</a> :: conn -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></p><div class="doc"><p>The name of the HDBC driver module for this connection. Ideally would be
 the same as the database name portion of the Cabal package name.  For
 instance, &quot;sqlite3&quot; or &quot;postgresql&quot;.  This is the layer that is bound most
 tightly to HDBC
</p></div><p class="src"><a name="v:dbTransactionSupport" class="def">dbTransactionSupport</a> :: conn -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Bool.html#t:Bool">Bool</a></p><div class="doc"><p>Whether or not the current database supports transactions. If False, then
 <code><a href="Database-HDBC-Types.html#v:commit">commit</a></code> and <code><a href="Database-HDBC-Types.html#v:rollback">rollback</a></code> should be expected to raise errors.
</p></div></div><div class="subs instances"><p id="control.i:Connection" class="caption collapser" onclick="toggleSection('i:Connection')">Instances</p><div id="section.i:Connection" class="show"><table><tr><td class="src"><a href="Database-HDBC-Types.html#t:Connection">Connection</a> <a href="Database-HDBC-Types.html#t:ConnWrapper">ConnWrapper</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Typeable-Internal.html#t:Typeable">Typeable</a> stmt =&gt; <a name="t:Statement" class="def">Statement</a> stmt  <span class="keyword">where</span></p><div class="doc"><p>Statement prepared on database side or just in memory
</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:execute" class="def">execute</a> :: stmt -&gt; [<a href="Database-HDBC-SqlValue.html#t:SqlValue">SqlValue</a>] -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></p><div class="doc"><p>Execute single query with parameters. In query each parameter must be
 replaced with ''?'' placeholder. This rule is true for every database, even
 for PostgreSQL which uses placeholders like ''$1''. Application must ensure
 that the count of placeholders is equal to count of parameter, it is likely
 cause an error if it is not.
</p></div><p class="src"><a name="v:executeRaw" class="def">executeRaw</a> :: stmt -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></p><div class="doc"><p>Execute single query without parameters. Has default implementation
 through <code><a href="Database-HDBC-Types.html#v:execute">execute</a></code>.
</p></div><p class="src"><a name="v:executeMany" class="def">executeMany</a> :: stmt -&gt; [[<a href="Database-HDBC-SqlValue.html#t:SqlValue">SqlValue</a>]] -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></p><div class="doc"><p>Execute one query many times with a list of paramters. Has default
 implementation through <code><a href="Database-HDBC-Types.html#v:execute">execute</a></code>.
</p></div><p class="src"><a name="v:statementStatus" class="def">statementStatus</a> :: stmt -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="Database-HDBC-Types.html#t:StatementStatus">StatementStatus</a></p><div class="doc"><p>Return the current statement's status.
</p></div><p class="src"><a name="v:affectedRows" class="def">affectedRows</a> :: stmt -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Prelude.html#t:Integer">Integer</a></p><div class="doc"><p>Return the count of rows affected by INSERT, UPDATE or DELETE
 query. After executing SELECT query it will return 0 every time.
 It is also undefined result after executing <code><a href="Database-HDBC-Types.html#v:executeMany">executeMany</a></code>
</p></div><p class="src"><a name="v:finish" class="def">finish</a> :: stmt -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></p><div class="doc"><p>Finish statement and remove database-specific pointer. No any actions may
 be proceeded after closing the statement, excpet <code><a href="Database-HDBC-Types.html#v:statementStatus">statementStatus</a></code> which
 will return <code><a href="Database-HDBC-Types.html#v:StatementFinished">StatementFinished</a></code> and <code><a href="Database-HDBC-Types.html#v:reset">reset</a></code>.
</p></div><p class="src"><a name="v:reset" class="def">reset</a> :: stmt -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></p><div class="doc"><p>Reset statement to it's initial state, just like after <code><a href="Database-HDBC-Types.html#v:prepare">prepare</a></code>.
</p></div><p class="src"><a name="v:fetchRow" class="def">fetchRow</a> :: stmt -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> (<a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> [<a href="Database-HDBC-SqlValue.html#t:SqlValue">SqlValue</a>])</p><div class="doc"><p>Fetch next row from the executed statement. Return Nothing when there is
 no more results acceptable. Each call return next row from the result.
</p><p>UPDATE INSERT and DELETE queries will likely return Nothing.
</p><p>NOTE: You still need to explicitly finish the statement after receiving
 Nothing, unlike with old HDBC interface.
</p></div><p class="src"><a name="v:fetchAllRows" class="def">fetchAllRows</a> :: stmt -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> [[<a href="Database-HDBC-SqlValue.html#t:SqlValue">SqlValue</a>]]</p><div class="doc"><p>Optional method to strictly fetch all rows from statement. Has default
 implementation through <code><a href="Database-HDBC-Types.html#v:fetchRow">fetchRow</a></code>.
</p></div><p class="src"><a name="v:getColumnNames" class="def">getColumnNames</a> :: stmt -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> [Text]</p><div class="doc"><p>Return list of column names of the result.
</p></div><p class="src"><a name="v:getColumnsCount" class="def">getColumnsCount</a> :: stmt -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Int.html#t:Int">Int</a></p><div class="doc"><p>Return the number of columns representing the result. Has default
 implementation through <code><a href="Database-HDBC-Types.html#v:getColumnNames">getColumnNames</a></code>
</p></div><p class="src"><a name="v:originalQuery" class="def">originalQuery</a> :: stmt -&gt; <a href="Database-HDBC-Types.html#t:Query">Query</a></p><div class="doc"><p>Return the original query the statement was prepared from.
</p></div></div><div class="subs instances"><p id="control.i:Statement" class="caption collapser" onclick="toggleSection('i:Statement')">Instances</p><div id="section.i:Statement" class="show"><table><tr><td class="src"><a href="Database-HDBC-Types.html#t:Statement">Statement</a> <a href="Database-HDBC-Types.html#t:StmtWrapper">StmtWrapper</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:2">Data types
</h1><div class="top"><p class="src"><span class="keyword">newtype</span>  <a name="t:Query" class="def">Query</a>  </p><div class="doc"><p>safe newtype wrapper for queries. Just lazy Text inside.         
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Query" class="def">Query</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:unQuery" class="def">unQuery</a> :: Text</dt><dd class="doc"><p>Unwrap query to lazy Text
</p></dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:Query" class="caption collapser" onclick="toggleSection('i:Query')">Instances</p><div id="section.i:Query" class="show"><table><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Eq.html#t:Eq">Eq</a> <a href="Database-HDBC-Types.html#t:Query">Query</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Data.html#t:Data">Data</a> <a href="Database-HDBC-Types.html#t:Query">Query</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Ord.html#t:Ord">Ord</a> <a href="Database-HDBC-Types.html#t:Query">Query</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Text-Read.html#t:Read">Read</a> <a href="Database-HDBC-Types.html#t:Query">Query</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Text-Show.html#t:Show">Show</a> <a href="Database-HDBC-Types.html#t:Query">Query</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Typeable-Internal.html#t:Typeable">Typeable</a> <a href="Database-HDBC-Types.html#t:Query">Query</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-String.html#t:IsString">IsString</a> <a href="Database-HDBC-Types.html#t:Query">Query</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Monoid.html#t:Monoid">Monoid</a> <a href="Database-HDBC-Types.html#t:Query">Query</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/deepseq-1.3.0.0/Control-DeepSeq.html#t:NFData">NFData</a> <a href="Database-HDBC-Types.html#t:Query">Query</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:ConnStatus" class="def">ConnStatus</a>  </p><div class="doc"><p>Connection status
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ConnOK" class="def">ConnOK</a></td><td class="doc"><p>Successfully connected
</p></td></tr><tr><td class="src"><a name="v:ConnDisconnected" class="def">ConnDisconnected</a></td><td class="doc"><p>Successfully disconnected, all
 statements must be closed at this state
</p></td></tr><tr><td class="src"><a name="v:ConnBad" class="def">ConnBad</a></td><td class="doc"><p>Connection is in some bad state
</p></td></tr></table></div><div class="subs instances"><p id="control.i:ConnStatus" class="caption collapser" onclick="toggleSection('i:ConnStatus')">Instances</p><div id="section.i:ConnStatus" class="show"><table><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Eq.html#t:Eq">Eq</a> <a href="Database-HDBC-Types.html#t:ConnStatus">ConnStatus</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Text-Read.html#t:Read">Read</a> <a href="Database-HDBC-Types.html#t:ConnStatus">ConnStatus</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Text-Show.html#t:Show">Show</a> <a href="Database-HDBC-Types.html#t:ConnStatus">ConnStatus</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Typeable-Internal.html#t:Typeable">Typeable</a> <a href="Database-HDBC-Types.html#t:ConnStatus">ConnStatus</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:ConnWrapper" class="def">ConnWrapper</a>  </p><div class="doc"><p>Wrapps the specific connection. You can write database-independent code
 mixing it with database-dependent using <code><a href="Database-HDBC-Types.html#v:castConnection">castConnection</a></code> function to cast
 Wrapper to specific connection type, if you need.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><span class="keyword">forall</span> conn . <a href="Database-HDBC-Types.html#t:Connection">Connection</a> conn =&gt; <a name="v:ConnWrapper" class="def">ConnWrapper</a> conn</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:ConnWrapper" class="caption collapser" onclick="toggleSection('i:ConnWrapper')">Instances</p><div id="section.i:ConnWrapper" class="show"><table><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Typeable-Internal.html#t:Typeable">Typeable</a> <a href="Database-HDBC-Types.html#t:ConnWrapper">ConnWrapper</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Database-HDBC-Types.html#t:Connection">Connection</a> <a href="Database-HDBC-Types.html#t:ConnWrapper">ConnWrapper</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:StatementStatus" class="def">StatementStatus</a>  </p><div class="doc"><p>Statement's status returning by function <code><a href="Database-HDBC-Types.html#v:statementStatus">statementStatus</a></code>.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:StatementNew" class="def">StatementNew</a></td><td class="doc"><p>Newly created statement
</p></td></tr><tr><td class="src"><a name="v:StatementExecuted" class="def">StatementExecuted</a></td><td class="doc"><p>Expression executed, now you can fetch the rows <code><a href="Database-HDBC-Types.html#t:Statement">Statement</a></code>
</p></td></tr><tr><td class="src"><a name="v:StatementFetched" class="def">StatementFetched</a></td><td class="doc"><p>Fetching is done, no more rows can be queried
</p></td></tr><tr><td class="src"><a name="v:StatementFinished" class="def">StatementFinished</a></td><td class="doc"><p>Finished, no more actions with this statement
</p></td></tr></table></div><div class="subs instances"><p id="control.i:StatementStatus" class="caption collapser" onclick="toggleSection('i:StatementStatus')">Instances</p><div id="section.i:StatementStatus" class="show"><table><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Eq.html#t:Eq">Eq</a> <a href="Database-HDBC-Types.html#t:StatementStatus">StatementStatus</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Text-Read.html#t:Read">Read</a> <a href="Database-HDBC-Types.html#t:StatementStatus">StatementStatus</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Text-Show.html#t:Show">Show</a> <a href="Database-HDBC-Types.html#t:StatementStatus">StatementStatus</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Typeable-Internal.html#t:Typeable">Typeable</a> <a href="Database-HDBC-Types.html#t:StatementStatus">StatementStatus</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:StmtWrapper" class="def">StmtWrapper</a>  </p><div class="doc"><p>Wrapper around some specific <code><a href="Database-HDBC-Types.html#t:Statement">Statement</a></code> instance to write
 database-independent code
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><span class="keyword">forall</span> stmt . <a href="Database-HDBC-Types.html#t:Statement">Statement</a> stmt =&gt; <a name="v:StmtWrapper" class="def">StmtWrapper</a> stmt</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:StmtWrapper" class="caption collapser" onclick="toggleSection('i:StmtWrapper')">Instances</p><div id="section.i:StmtWrapper" class="show"><table><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Typeable-Internal.html#t:Typeable">Typeable</a> <a href="Database-HDBC-Types.html#t:StmtWrapper">StmtWrapper</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Database-HDBC-Types.html#t:Statement">Statement</a> <a href="Database-HDBC-Types.html#t:StmtWrapper">StmtWrapper</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:SqlError" class="def">SqlError</a>  </p><div class="doc"><p>Error throwing by driver when database operation fails
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:SqlError" class="def">SqlError</a></td><td class="doc"><p>Internal database error
</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:seErrorCode" class="def">seErrorCode</a> :: <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></dt><dd class="doc"><p>Low level database-specific error code
</p></dd><dt class="src"><a name="v:seErrorMsg" class="def">seErrorMsg</a> :: <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></dt><dd class="doc"><p>Error description
</p><p>Error description from the database client library
</p></dd></dl><div class="clear"></div></div></td></tr><tr><td class="src"><a name="v:SqlDriverError" class="def">SqlDriverError</a></td><td class="doc"><p>Driver-specific operational error
</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:seErrorMsg" class="def">seErrorMsg</a> :: <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></dt><dd class="doc"><p>Error description
</p><p>Error description from the database client library
</p></dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:SqlError" class="caption collapser" onclick="toggleSection('i:SqlError')">Instances</p><div id="section.i:SqlError" class="show"><table><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Eq.html#t:Eq">Eq</a> <a href="Database-HDBC-Types.html#t:SqlError">SqlError</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Text-Read.html#t:Read">Read</a> <a href="Database-HDBC-Types.html#t:SqlError">SqlError</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Text-Show.html#t:Show">Show</a> <a href="Database-HDBC-Types.html#t:SqlError">SqlError</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Typeable-Internal.html#t:Typeable">Typeable</a> <a href="Database-HDBC-Types.html#t:SqlError">SqlError</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Control-Exception-Base.html#t:Exception">Exception</a> <a href="Database-HDBC-Types.html#t:SqlError">SqlError</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:3">functions
</h1><div class="top"><p class="src"><a name="v:castConnection" class="def">castConnection</a> :: <a href="Database-HDBC-Types.html#t:Connection">Connection</a> conn =&gt; <a href="Database-HDBC-Types.html#t:ConnWrapper">ConnWrapper</a> -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> conn</p><div class="doc"><p>Cast wrapped connection to the specific connection type using <code><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Typeable.html#v:cast">cast</a></code> of
 <code><a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Typeable-Internal.html#t:Typeable">Typeable</a></code>. You can write database-specific code safely casting wrapped
 connection to specific type dynamically.
</p></div></div><div class="top"><p class="src"><a name="v:castStatement" class="def">castStatement</a> :: <a href="Database-HDBC-Types.html#t:Statement">Statement</a> stmt =&gt; <a href="Database-HDBC-Types.html#t:StmtWrapper">StmtWrapper</a> -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> stmt</p><div class="doc"><p>Cast wrapped statement to specific type.  You can write database-specific
 code safely casting wrapped statement to specific type dynamically.
</p></div></div><div class="top"><p class="src"><a name="v:withTransaction" class="def">withTransaction</a> :: <a href="Database-HDBC-Types.html#t:Connection">Connection</a> conn =&gt; conn -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> a -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> a</p><div class="doc"><p>Execute some code.  If any uncaught exception occurs, run
<code><a href="Database-HDBC-Types.html#v:rollback">rollback</a></code> and re-raise it.  Otherwise, run <code><a href="Database-HDBC-Types.html#v:commit">commit</a></code> and return.
</p><p>This function, therefore, encapsulates the logical property that a transaction
is all about: all or nothing.
</p><p>The <code><a href="Database-HDBC-Types.html#t:Connection">Connection</a></code> object passed in is passed directly to the specified function
as a convenience.
</p><p>This function traps <em>all</em> uncaught exceptions, not just <code><a href="Database-HDBC-Types.html#t:SqlError">SqlError</a></code>.  Therefore,
you will get a rollback for any exception that you don't handle.  That's
probably what you want anyway.
</p><p>If there was an error while running <code><a href="Database-HDBC-Types.html#v:rollback">rollback</a></code>, this error will not be
reported since the original exception will be propogated back.  (You'd probably
like to know about the root cause for all of this anyway.)  Feedback
on this behavior is solicited.
</p></div></div><div class="top"><p class="src"><a name="v:withStatement" class="def">withStatement</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="Database-HDBC-Types.html#t:Connection">Connection</a> conn, <a href="Database-HDBC-Types.html#t:Statement">Statement</a> stmt, stmt ~ <a href="Database-HDBC-Types.html#t:ConnStatement">ConnStatement</a> conn)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; conn</td><td class="doc"><p>Connection
</p></td></tr><tr><td class="src">-&gt; <a href="Database-HDBC-Types.html#t:Query">Query</a></td><td class="doc"><p>Query string
</p></td></tr><tr><td class="src">-&gt; (stmt -&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> a)</td><td class="doc"><p>Action at the statement
</p></td></tr><tr><td class="src">-&gt; <a href="/usr/share/doc/ghc-7.4.2/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Create statement and execute monadic action using 
it. Safely finalize Statement after action is done.
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.11.1</p></div></body></html>